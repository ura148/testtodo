{"remainingRequest":"/Users/uratomo/test/node_modules/babel-loader/lib/index.js!/Users/uratomo/test/node_modules/eslint-loader/index.js??ref--13-0!/Users/uratomo/test/src/router.js","dependencies":[{"path":"/Users/uratomo/test/src/router.js","mtime":1594737349888},{"path":"/Users/uratomo/test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/uratomo/test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/uratomo/test/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29tZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBTaWdudXAgZnJvbSAnQC9jb21wb25lbnRzL1NpZ251cCc7CmltcG9ydCBTaWduaW4gZnJvbSAnQC9jb21wb25lbnRzL1NpZ25pbic7CmltcG9ydCBDYWxlbmRhciBmcm9tICdAL2NvbXBvbmVudHMvQ2FsZW5kYXInOwppbXBvcnQgVGFzayBmcm9tICdAL2NvbXBvbmVudHMvVGFzay52dWUnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwpWdWUudXNlKFJvdXRlcik7CnZhciByb3V0ZXIgPSBuZXcgUm91dGVyKHsKICAvLyBtb2RlOiAnaGlzdG9yeScsCiAgcm91dGVzOiBbewogICAgcGF0aDogJyonLAogICAgcmVkaXJlY3Q6ICdzaWduaW4nCiAgfSwgewogICAgcGF0aDogJy8nLAogICAgbmFtZTogJ3Rhc2snLAogICAgY29tcG9uZW50OiBUYXNrLAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnL3NpZ251cCcsCiAgICBuYW1lOiAnU2lnbnVwJywKICAgIGNvbXBvbmVudDogU2lnbnVwCiAgfSwgewogICAgcGF0aDogJy9zaWduaW4nLAogICAgbmFtZTogJ1NpZ25pbicsCiAgICBjb21wb25lbnQ6IFNpZ25pbgogIH0sIHsKICAgIHBhdGg6ICcvY2FsZW5kYXInLAogICAgbmFtZTogJ0NhbGVuZGFyJywKICAgIGNvbXBvbmVudDogQ2FsZW5kYXIKICB9XQp9KTsKCnZhciBuZXh0QXV0aCA9IGZ1bmN0aW9uIG5leHRBdXRoKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8g6KqN6Ki844GM5b+F6KaB44Gq44Oa44O844K444Gn44Ot44Kw44Kk44Oz5oOF5aCx44GM54Sh44GR44KM44Gw44Oq44OA44Kk44Os44Kv44OICiAgaWYgKHN0b3JlLmdldHRlcnNbJ2F1dGgvdXNlciddLmF1dGgpIHsKICAgIG5leHQoKTsKICB9IGVsc2UgewogICAgbmV4dCh7CiAgICAgIHBhdGg6ICcvJywKICAgICAgcXVlcnk6IHsKICAgICAgICByZWRpcmVjdDogdG8uZnVsbFBhdGgKICAgICAgfQogICAgfSk7CiAgfQp9OwoKcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8g44Ot44O844OH44Kj44Oz44Kw55So44Gu44Kq44O844OQ44O844Os44Kk44KS5LuY44GR44KLCiAgaWYgKHRvLm5hbWUgIT09ICdtZW1iZXItZGV0YWlsJykgc3RvcmUuY29tbWl0KCd2aWV3L3N0YXJ0Jyk7IC8vIOimquODq+ODvOODiOOCkuWQq+OCgeOBpuiqjeiovOOBjOW/heimgeOBi+OCkueiuuiqjQoKICBpZiAodG8ubWF0Y2hlZC5zb21lKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgIHJldHVybiByZWNvcmQubWV0YS5yZXF1aXJlc0F1dGg7CiAgfSkpIHsKICAgIGlmIChzdG9yZS5nZXR0ZXJzWydhdXRoL2luaXQnXSAhPT0gdHJ1ZSkgewogICAgICAvLyDjgb7jgaDoqo3oqLzjgZfjgabjgYTjgarjgZHjgozjgbAgaW5pdCDjgYzmm7TmlrDjgZXjgozjgovjga7jgpLnm6PoppYKICAgICAgdmFyIHVud2F0Y2ggPSBzdG9yZS53YXRjaChmdW5jdGlvbiAoc3RhdGUsIGdldHRlcnMpIHsKICAgICAgICByZXR1cm4gZ2V0dGVyc1snYXV0aC9pbml0J107CiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICB1bndhdGNoKCk7CiAgICAgICAgbmV4dEF1dGgodG8sIGZyb20sIG5leHQpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIOiqjeiovOa4iOOBv+OBquOCieOBmeOBkOeiuuiqjQogICAgICBuZXh0QXV0aCh0bywgZnJvbSwgbmV4dCk7CiAgICB9CiAgfSBlbHNlIHsKICAgIG5leHQoKTsKICB9Cn0pOyAvLyDjg63jg7zjg4fjgqPjg7PjgrDnlKjjga7jgqrjg7zjg5Djg7zjg6zjgqTjgpLmtojjgZkKCnJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvLCBmcm9tKSB7CiAgc3RvcmUuY29tbWl0KCd2aWV3L2VuZCcpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["/Users/uratomo/test/src/router.js"],"names":["Vue","Router","Signup","Signin","Calendar","Task","firebase","use","router","routes","path","redirect","name","component","meta","requiresAuth","nextAuth","to","from","next","store","getters","auth","query","fullPath","beforeEach","commit","matched","some","record","unwatch","watch","state","afterEach"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,MAAP,MAAmB,YAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,MAAP,MAAmB,qBAAnB;AACA,OAAOC,QAAP,MAAqB,uBAArB;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,OAAOC,QAAP,MAAqB,UAArB;AAIAN,GAAG,CAACO,GAAJ,CAAQN,MAAR;AAEA,IAAIO,MAAM,GAAI,IAAIP,MAAJ,CAAW;AACvB;AACAQ,EAAAA,MAAM,EAAE,CACN;AACEC,IAAAA,IAAI,EAAE,GADR;AAEEC,IAAAA,QAAQ,EAAE;AAFZ,GADM,EAKN;AACED,IAAAA,IAAI,EAAE,GADR;AAEEE,IAAAA,IAAI,EAAE,MAFR;AAGEC,IAAAA,SAAS,EAAER,IAHb;AAIES,IAAAA,IAAI,EAAE;AAAEC,MAAAA,YAAY,EAAE;AAAhB;AAJR,GALM,EAWN;AACEL,IAAAA,IAAI,EAAE,SADR;AAEEE,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,SAAS,EAAEX;AAHb,GAXM,EAgBN;AACEQ,IAAAA,IAAI,EAAE,SADR;AAEEE,IAAAA,IAAI,EAAE,QAFR;AAGEC,IAAAA,SAAS,EAAEV;AAHb,GAhBM,EAqBN;AACEO,IAAAA,IAAI,EAAE,WADR;AAEEE,IAAAA,IAAI,EAAE,UAFR;AAGEC,IAAAA,SAAS,EAAET;AAHb,GArBM;AAFe,CAAX,CAAd;;AA+BA,IAAMY,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACnC;AACA,MAAIC,KAAK,CAACC,OAAN,CAAc,WAAd,EAA2BC,IAA/B,EAAqC;AACnCH,IAAAA,IAAI;AACL,GAFD,MAEO;AACLA,IAAAA,IAAI,CAAC;AACHT,MAAAA,IAAI,EAAE,GADH;AAEHa,MAAAA,KAAK,EAAE;AAAEZ,QAAAA,QAAQ,EAAEM,EAAE,CAACO;AAAf;AAFJ,KAAD,CAAJ;AAID;AACF,CAVD;;AAYAhB,MAAM,CAACiB,UAAP,CAAkB,UAACR,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA,MAAIF,EAAE,CAACL,IAAH,KAAY,eAAhB,EAAiCQ,KAAK,CAACM,MAAN,CAAa,YAAb,EAFG,CAGpC;;AACA,MAAIT,EAAE,CAACU,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACf,IAAP,CAAYC,YAAhB;AAAA,GAAtB,CAAJ,EAAyD;AACvD,QAAIK,KAAK,CAACC,OAAN,CAAc,WAAd,MAA+B,IAAnC,EAAyC;AACvC;AACA,UAAMS,OAAO,GAAGV,KAAK,CAACW,KAAN,CAAY,UAACC,KAAD,EAAQX,OAAR;AAAA,eAAoBA,OAAO,CAAC,WAAD,CAA3B;AAAA,OAAZ,EAAsD,YAAM;AAC1ES,QAAAA,OAAO;AACPd,QAAAA,QAAQ,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,CAAR;AACD,OAHe,CAAhB;AAID,KAND,MAMO;AACL;AACAH,MAAAA,QAAQ,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,CAAR;AACD;AACF,GAXD,MAWO;AACLA,IAAAA,IAAI;AACL;AACF,CAlBD,E,CAoBA;;AACAX,MAAM,CAACyB,SAAP,CAAiB,UAAChB,EAAD,EAAKC,IAAL,EAAc;AAC7BE,EAAAA,KAAK,CAACM,MAAN,CAAa,UAAb;AACD,CAFD;AAGA,eAAelB,MAAf","sourcesContent":["import Vue from 'vue'\nimport Router from 'vue-router'\nimport Signup from '@/components/Signup'\nimport Signin from '@/components/Signin'\nimport Calendar from '@/components/Calendar'\nimport Task from '@/components/Task.vue'\nimport firebase from 'firebase'\n\n\n\nVue.use(Router)\n\nlet router =  new Router({\n  // mode: 'history',\n  routes: [\n    {\n      path: '*',\n      redirect: 'signin'\n    },\n    {\n      path: '/',\n      name: 'task',\n      component: Task,\n      meta: { requiresAuth: true }\n    },\n    {\n      path: '/signup',\n      name: 'Signup',\n      component: Signup,\n    },\n    {\n      path: '/signin',\n      name: 'Signin',\n      component: Signin\n    },\n    {\n      path: '/calendar',\n      name: 'Calendar',\n      component: Calendar\n    }\n  ]\n})\n\nconst nextAuth = (to, from, next) => {\n  // 認証が必要なページでログイン情報が無ければリダイレクト\n  if (store.getters['auth/user'].auth) {\n    next()\n  } else {\n    next({\n      path: '/',\n      query: { redirect: to.fullPath }\n    })\n  }\n}\n\nrouter.beforeEach((to, from, next) => {\n  // ローディング用のオーバーレイを付ける\n  if (to.name !== 'member-detail') store.commit('view/start')\n  // 親ルートを含めて認証が必要かを確認\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (store.getters['auth/init'] !== true) {\n      // まだ認証していなければ init が更新されるのを監視\n      const unwatch = store.watch((state, getters) => getters['auth/init'], () => {\n        unwatch()\n        nextAuth(to, from, next)\n      })\n    } else {\n      // 認証済みならすぐ確認\n      nextAuth(to, from, next)\n    }\n  } else {\n    next()\n  }\n})\n\n// ローディング用のオーバーレイを消す\nrouter.afterEach((to, from) => {\n  store.commit('view/end')\n})\nexport default router\n"]}]}